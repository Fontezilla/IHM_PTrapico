<ion-content [fullscreen]="true" class="register-content">
  <div class="top-bar">
    <div class="circle-avatar">NT</div>
  </div>
  <h1 class="register-title">Registar</h1>

  <form [formGroup]="formRegister" (ngSubmit)="onSubmit()">
    <ion-item class="custom-item" lines="none">
      <ion-input
        formControlName="nome"
        placeholder="Nome Completo"
        class="custom-input center-input"
      ></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="formRegister.get('nome')?.touched && formRegister.get('nome')?.invalid">
      <div *ngIf="formRegister.get('nome')?.errors?.['required']">Nome é obrigatório.</div>
      <div *ngIf="formRegister.get('nome')?.errors?.['minlength']">Mínimo 2 letras.</div>
      <div *ngIf="formRegister.get('nome')?.errors?.['pattern']">Apenas letras e espaços.</div>
    </ion-text>

    <ion-item class="custom-item" lines="none">
      <ion-input
        formControlName="email"
        type="email"
        placeholder="Endereço de E-mail"
        class="custom-input center-input"
      ></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="formRegister.get('email')?.touched && formRegister.get('email')?.invalid">
      <div *ngIf="formRegister.get('email')?.errors?.['required']">Email é obrigatório.</div>
      <div *ngIf="formRegister.get('email')?.errors?.['email']">Formato inválido.</div>
    </ion-text>

    <ion-item class="custom-item" lines="none">
      <ion-input
        formControlName="telefone"
        type="tel"
        placeholder="Número de telemóvel"
        class="custom-input center-input"
      ></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="formRegister.get('telefone')?.touched && formRegister.get('telefone')?.invalid">
      <div *ngIf="formRegister.get('telefone')?.errors?.['required']">Telefone é obrigatório.</div>
      <div *ngIf="formRegister.get('telefone')?.errors?.['pattern']">Formato inválido.</div>
    </ion-text>

    <ion-item class="custom-item" lines="none">
      <ion-input
        [type]="showPassword ? 'text' : 'password'"
        formControlName="password"
        placeholder="Palavra-passe"
        class="custom-input center-input"
      ></ion-input>
      <ion-icon
        slot="end"
        class="password-toggle-icon"
        [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
        (click)="togglePasswordVisibility()"
      ></ion-icon>
    </ion-item>
    <ion-text color="danger" *ngIf="formRegister.get('password')?.touched && formRegister.get('password')?.invalid">
      <div *ngIf="formRegister.get('password')?.errors?.['required']">Palavra-passe é obrigatória.</div>
      <div *ngIf="formRegister.get('password')?.errors?.['minlength']">Mínimo 6 caracteres.</div>
    </ion-text>

    <div class="btn-group">
      <ion-button
        expand="block"
        type="submit"
        [disabled]="formRegister.invalid || isLoading"
        class="btn-register"
      >
        Registar
      </ion-button>
      <ion-button expand="block" fill="outline" (click)="goBack()" class="btn-back">
        Voltar
      </ion-button>
    </div>
  </form>
</ion-content>
